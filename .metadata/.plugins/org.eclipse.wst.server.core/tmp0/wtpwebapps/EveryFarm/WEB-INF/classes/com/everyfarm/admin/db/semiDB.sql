CREATE TABLE "MEMBER" 
   (	"MEM_ID" VARCHAR2(50) NOT NULL ENABLE, 
	"MEM_PW" VARCHAR2(50) NOT NULL ENABLE, 
	"MEM_NAME" VARCHAR2(30) NOT NULL ENABLE, 
	"MEM_PHONE" VARCHAR2(20) NOT NULL ENABLE, 
	"MEM_ZONECODE" VARCHAR2(10) NOT NULL ENABLE, 
	"MEM_ADDR" VARCHAR2(100) NOT NULL ENABLE, 
	"MEM_ADDRETC" VARCHAR2(100) NOT NULL ENABLE, 
	"MEM_EMAIL" VARCHAR2(100) NOT NULL ENABLE, 
	"MEM_GRADE" NUMBER(2,0) NOT NULL ENABLE, 
	"MEM_REGDATE" DATE DEFAULT SYSDATE NOT NULL ENABLE, 
	"MEM_DROP" VARCHAR2(2) NOT NULL ENABLE, 
	 CONSTRAINT "MEMBER_PK_MEM_ID" PRIMARY KEY ("MEM_ID")
);


INSERT INTO BIGSEMI04."MEMBER" (MEM_ID,MEM_PW,MEM_NAME,MEM_PHONE,MEM_ZONECODE,MEM_ADDR,MEM_ADDRETC,MEM_EMAIL,MEM_GRADE,MEM_REGDATE,MEM_DROP) VALUES 
('FARMER','1234','농부','01012341234','01111','서울시 강남구 도곡동','롯데캐슬201동','kdy41000@naver.com',2,TIMESTAMP '2020-02-12 11:35:43.000000','y')
,('FARMERKIM','1234','김농부','01012341234','01111','서울시 강남구 도곡동','롯데캐슬201동','kdy41000@naver.com',2,TIMESTAMP '2020-02-12 11:35:58.000000','y')
,('GUESTKANG','1234','김또깡','01012341234','01111','서울시 강남구 도곡동','롯데캐슬201동','kdy41000@naver.com',1,TIMESTAMP '2020-02-12 11:36:16.000000','y')
,('GUEST','1234','회원','01012341234','01111','서울시 강남구 도곡동','롯데캐슬201동','kdy41000@naver.com',1,TIMESTAMP '2020-02-12 11:07:11.000000','y')
,('FARMERKANG','1234','농부','01012341234','01111','서울시 강남구 도곡동','롯데캐슬201동','kdy41000@naver.com',2,TIMESTAMP '2020-02-12 11:07:12.000000','y')
,('ADMIN','1234','관리자','01012341234','01111','서울시 강남구 도곡동','롯데캐슬201동','kdy41000@naver.com',3,TIMESTAMP '2020-02-12 11:07:14.000000','y')
,('GUESTKIM','1234','김동영','01050543568','48060','부산 해운대구 APEC로 30','1234','kdy41000@gmail.com',1,TIMESTAMP '2020-02-12 11:25:29.000000','y')
;

--GRADE: 1 회원 / 2 농부 / 3 관리자
SELECT * FROM MEMBER;

INSERT INTO MEMBER VALUES(
'user', '1234', '홍길동', 'hong@hong.com', 
'11176', '서울시 강남구 역삼동', 'KH정보교육원',
'010-1111-1111', 1,SYSDATE, 'N'
);

INSERT INTO MEMBER VALUES(
'user2', '1234', '이순신', 'lee@lee.com', 
'11100', '서울시 강남구 역삼동', 'KH정보교육원',
'010-2222-2222', 2,SYSDATE, 'N'
);

INSERT INTO MEMBER VALUES(
'user3', '1234', '장영실', 'jang@g.com', 
'12222', '서울시 강남구 역삼동', 'KH정보교육원',
'010-3333-3333', 1,SYSDATE, 'N'
);

ALTER TABLE FARMER
ADD CONSTRAINT "FARMER_FK_MEM_ID"
FOREIGN KEY("MEM_ID")
REFERENCES MEMEBER("MEM_ID");


	 CONSTRAINT "FARMER_PK_MEM_ID" PRIMARY KEY ("MEM_ID")
	 CONSTRAINT "FUND_FK_STOCK_NO" FOREIGN KEY ("STOCK_NO")

--회원이 농부 신청서 양식을 작성하면 양식을 확인해서 관리자가 승인해준다.
--이때 승인이란, 해당 아이디를 받아서 데이터베이스에 튜플(레코드)를 만드는 것이다. 

CREATE TABLE "FARMER" 
   (	"MEM_ID" VARCHAR2(50) NOT NULL ENABLE, 
	"FARMER_STATUS" NUMBER(3,0) NOT NULL ENABLE, 
	"FARMER_REGDATE" DATE NOT NULL ENABLE, 
	 CONSTRAINT "FARMER_PK_MEM_ID" PRIMARY KEY ("MEM_ID")
   );
   
INSERT INTO BIGSEMI04.FARMER (MEM_ID,FARMER_STATUS,FARMER_REGDATE) VALUES 
('GUEST',1,TIMESTAMP '2020-02-12 12:25:33.000000')
;   

SELECT * FROM FARMER;

--FARMER_STATUS : 1 승인대기 / 2 승인완료

INSERT INTO FARMER VALUES(
'user', 1, SYSDATE
);

INSERT INTO FARMER VALUES(
'user2', 2, SYSDATE
);

INSERT INTO FARMER VALUES(
'user3', 1, SYSDATE
);

SELECT A.ID, A.NAME, A.GRADE, B.FARMER_STATUS
FROM MEMBER A, FARMER B
WHERE A.ID = B.ID

--회원을 농부로 승격(update)
UPDATE FARMER SET FARMER_STATUS=2 WHERE ID='user3';
UPDATE MEMBER SET GRADE=2 WHERE ID='user3';

--원래대로
UPDATE FARMER SET FARMER_STATUS=1 WHERE ID='user3';
UPDATE MEMBER SET GRADE=1 WHERE ID='user3';

SELECT *
FROM MEMBER A, FARMER B
WHERE A.ID = B.ID
AND A.ID='user'


------------------------------------------------------------------------------
 
CREATE TABLE "AUCTION" 
   (	"AUC_NO" NUMBER(15,0) NOT NULL ENABLE, 
	"STOCK_NO" NUMBER(15,0) NOT NULL ENABLE, 
	"AUC_STARTPRICE" NUMBER(20,0), 
	"AUC_NOWPRICE" NUMBER(20,0), 
	"AUC_STATUS" NUMBER(3,0), 
	"AUC_REGDATE" DATE DEFAULT SYSDATE, 
	"AUC_ENDDATE" DATE, 
	"AUC_JOIN" NUMBER(10,0) DEFAULT 0, 
	 CONSTRAINT "AUCTION_PK_AUC_NO" PRIMARY KEY ("AUC_NO")
   );

CREATE TABLE "STOCK" 
   (	"STOCK_NO" NUMBER(15,0) NOT NULL ENABLE, 
	"MEM_ID" VARCHAR2(30) NOT NULL ENABLE, 
	"STOCK_NAME" VARCHAR2(100) NOT NULL ENABLE, 
	"STOCK_DETAIL" VARCHAR2(500) NOT NULL ENABLE, 
	"STOCK_KG" NUMBER(10,0) NOT NULL ENABLE, 
	"STOCK_PRICE" NUMBER(10,0) NOT NULL ENABLE, 
	"STOCK_IMAGE" VARCHAR2(1000) NOT NULL ENABLE, 
	"STOCK_LOCATION" VARCHAR2(30) NOT NULL ENABLE, 
	"STOCK_KIND" NUMBER(5,0) NOT NULL ENABLE, 
	 CONSTRAINT "STOCK_PK_STOCK_NO" PRIMARY KEY ("STOCK_NO")
   );   
SELECT * FROM AUCTION;
SELECT * FROM STOCK;

INSERT INTO AUCTION (AUC_NO,STOCK_NO,AUC_STARTPRICE,AUC_NOWPRICE,AUC_STATUS,AUC_REGDATE,AUC_ENDDATE,AUC_JOIN) VALUES 
(1,1,600,4600,3,TIMESTAMP '2020-01-12 11:38:48.000000',TIMESTAMP '2020-02-01 00:00:00.000000',12)
;

INSERT INTO AUCTION (AUC_NO,STOCK_NO,AUC_STARTPRICE,AUC_NOWPRICE,AUC_STATUS,AUC_REGDATE,AUC_ENDDATE,AUC_JOIN) VALUES 
(2,2,1000,1000,1,TIMESTAMP '2020-02-01 12:00:37.000000',TIMESTAMP '2020-03-01 00:00:00.000000',0)
;

INSERT INTO AUCTION (AUC_NO,STOCK_NO,AUC_STARTPRICE,AUC_NOWPRICE,AUC_STATUS,AUC_REGDATE,AUC_ENDDATE,AUC_JOIN) VALUES 
(3,3,1200,2300,2,TIMESTAMP '2020-02-03 12:00:37.000000',TIMESTAMP '2020-03-05 00:00:00.000000',5)
;



INSERT INTO STOCK (STOCK_NO,MEM_ID,STOCK_NAME,STOCK_DETAIL,STOCK_KG,STOCK_PRICE,STOCK_IMAGE,STOCK_LOCATION,STOCK_KIND) VALUES 
(1,'user','연천시 바나나','바나나./바나나 정말 맛있습니다./귀요미 바나나/여러분께 제공합니다.',50,20000,'resources\images\productstorage\banana.png/
					resources\images\productstorage\banana.png/
					resources\images\productstorage\banana.png/
					resources\images\productstorage\banana.png','연천시',1)
;
INSERT INTO STOCK (STOCK_NO,MEM_ID,STOCK_NAME,STOCK_DETAIL,STOCK_KG,STOCK_PRICE,STOCK_IMAGE,STOCK_LOCATION,STOCK_KIND) VALUES 
(2,'user2','포천시 사과','맛있습니다.',50,20000,'resources\images\productstorage\banana.png/
					resources\images\productstorage\banana.png/
					resources\images\productstorage\banana.png/
					resources\images\productstorage\banana.png','연천시',1)
;
INSERT INTO STOCK (STOCK_NO,MEM_ID,STOCK_NAME,STOCK_DETAIL,STOCK_KG,STOCK_PRICE,STOCK_IMAGE,STOCK_LOCATION,STOCK_KIND) VALUES 
(3,'user3','남양주시 배','맛있습니다.',50,20000,'resources\images\productstorage\banana.png/
					resources\images\productstorage\banana.png/
					resources\images\productstorage\banana.png/
					resources\images\productstorage\banana.png','연천시',1)
;	

SELECT *
FROM AUCTION A, STOCK B
WHERE A.STOCK_NO = B.STOCK_NO

-- 미등록 승인 -> 진행중		
UPDATE AUCTION SET AUC_STATUS=2 WHERE AUC_NO=2
-- 원래대로 되돌리기
UPDATE AUCTION SET AUC_STATUS=1 WHERE AUC_NO=2

CREATE TABLE "FUND" 
   (	"FUND_NO" NUMBER(15,0) NOT NULL ENABLE, 
	"STOCK_NO" NUMBER(15,0) NOT NULL ENABLE, 
	"FUND_CURRENTPRICE" NUMBER(20,0), 
	"FUND_PRICE" NUMBER(20,0) NOT NULL ENABLE, 
	"FUND_STATUS" NUMBER NOT NULL ENABLE, 
	"FUND_REGDATE" DATE NOT NULL ENABLE, 
	"FUND_ENDDATE" DATE NOT NULL ENABLE, 
	"FUND_JOIN" NUMBER(10,0), 
	 CONSTRAINT "FUND_PK_FUND_NO" PRIMARY KEY ("FUND_NO")
   );

   
   
